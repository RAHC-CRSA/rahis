<form [formGroup]="treatmentInfo">
  <fieldset>
    <div ngPreserveWhitespaces>
      <div class="p-3">
        <h5 class="mb-3">Treatment Info</h5>
        <hr>

        <div class="row g-3 mb-3">
          <label>Were you able to stamp out the disease?</label>
          <div class="g-3">
            <div>
              <input cFormCheckInput formControlName="stampingOut" type="radio" [value]="false" />
              <label cFormCheckLabel>No</label>
            </div>
            <div>
              <input cFormCheckInput formControlName="stampingOut" type="radio" [value]="true" />
              <label cFormCheckLabel>Yes</label>
            </div>
          </div>

        </div>

        <div class="row g-3 mb-3">
          <label>Did you destroy infected corpses?</label>
          <div class="g-3">
            <div>
              <input cFormCheckInput formControlName="destructionOfCorpses" type="radio" [value]="false" />
              <label cFormCheckLabel>No</label>
            </div>
            <div>
              <input cFormCheckInput formControlName="destructionOfCorpses" type="radio" [value]="true" />
              <label cFormCheckLabel>Yes</label>
            </div>
          </div>

          <div *ngIf="corpseDestruction">
            <div class="g-3 mb-3">
              <div xs>
                <label>How many corpses were destroyed?</label>
                <input aria-label="Number infected" cFormControl formControlName="corpsesDestroyed"
                  placeholder="Number of corpses destroyed" />
              </div>
            </div>
          </div>
        </div>

        <div class="row g-3 mb-3">
          <label>Did you disinfect infected species?</label>
          <div>
            <div>
              <input cFormCheckInput formControlName="disinfection" type="radio" [value]="false" />
              <label cFormCheckLabel>No</label>
            </div>
            <div>
              <input cFormCheckInput formControlName="disinfection" type="radio" [value]="true" />
              <label cFormCheckLabel>Yes</label>
            </div>
          </div>
        </div>

        <div class="row g-3 mb-3">
          <label>Did you observer infected species?</label>
          <div>
            <div>
              <input cFormCheckInput formControlName="observation" type="radio" [value]="false" />
              <label cFormCheckLabel>No</label>
            </div>
            <div>
              <input cFormCheckInput formControlName="observation" type="radio" [value]="true" />
              <label cFormCheckLabel>Yes</label>
            </div>
          </div>

          <div *ngIf="wasObservation">
            <div class="g-3 mb-3">
              <div xs>
                <label>For how long?</label>
                <input aria-label="Observation duration" cFormControl formControlName="observationDuration"
                  placeholder="7 days" />
              </div>
            </div>
          </div>
        </div>

        <div class="row g-3 mb-3">
          <label>Did you quarantine infected species?</label>
          <div class="g-3">
            <div>
              <input cFormCheckInput formControlName="quarantine" type="radio" [value]="false" />
              <label cFormCheckLabel>No</label>
            </div>
            <div>
              <input cFormCheckInput formControlName="quarantine" type="radio" [value]="true" />
              <label cFormCheckLabel>Yes</label>
            </div>
          </div>
          <div *ngIf="wasQuarantined">
            <div class="g-3 mb-3">
              <div xs>
                <label>For how long?</label>
                <input aria-label="Quarantine duration" cFormControl formControlName="quarantineDuration"
                  placeholder="10 days" />
              </div>
            </div>
          </div>
        </div>

        <div class="row g-3 mb-3">
          <label>Did you control movement?</label>
          <div>
            <div>
              <input cFormCheckInput formControlName="movementControl" type="radio" [value]="false" />
              <label cFormCheckLabel>No</label>
            </div>
            <div>
              <input cFormCheckInput formControlName="movementControl" type="radio" [value]="true" />
              <label cFormCheckLabel>Yes</label>
            </div>
          </div>
          <div *ngIf="movementControlled">
            <div class="g-3 mb-3">
              <div xs>
                <label>How?</label>
                <textarea aria-label="Movement control measures" cFormControl formControlName="movementControlMeasures"
                  placeholder="Measures taken to control movement"></textarea>
              </div>
            </div>
          </div>
        </div>

        <div class="row g-3 mb-3">
          <label>Did you administer medication?</label>
          <div>
            <div>
              <input cFormCheckInput formControlName="treatment" type="radio" [value]="false" />
              <label cFormCheckLabel>No</label>
            </div>
            <div>
              <input cFormCheckInput formControlName="treatment" type="radio" [value]="true" />
              <label cFormCheckLabel>Yes</label>
            </div>
          </div>

          <div class="g-3 mb-3" *ngIf="administeredMeds">
            <div>
              <h4 class="mb-3">Medications</h4>
              <div *ngIf="formData.medications?.length" class="mb-3">
                <div>
                  <table class="table table-hover table-striped">
                    <thead>
                      <tr>
                        <th>Name</th>
                        <th>Dosage</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let med of formData.medications; index as i">
                        <td>{{ med.name }}</td>
                        <td>{{ med.dosage }}</td>
                        <td></td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>

              <div>
                <div>
                  <app-medications (submit)="onMedicationSubmit($event)" class="mb-4"></app-medications>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div>
          <div>
            <input (click)="onPrevious()" type="button" name="previous" class="btn btn-light mx-1" value="Previous" />
            <input (click)="onSubmit()" type="button" name="next" class="next btn btn-light mx-1" value="Next"
              [disabled]="treatmentInfo.invalid" />
          </div>
        </div>
      </div>
    </div>
  </fieldset>
</form>