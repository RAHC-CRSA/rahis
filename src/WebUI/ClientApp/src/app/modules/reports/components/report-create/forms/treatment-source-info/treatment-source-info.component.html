<form [formGroup]="treatmentSourceInfo">
  <fieldset>
    <div>
      <div class="p-3">
        <h5 class="mb-3">Treatment Source</h5>
        <hr>

        <div class="row g-3 mb-3">
          <label>Vaccination</label>
          <div>
            <div>
              <input cFormCheckInput formControlName="vaccinated" type="radio" [value]="false" />
              <label cFormCheckLabel>No</label>
            </div>
            <div>
              <input cFormCheckInput formControlName="vaccinated" type="radio" [value]="true" />
              <label cFormCheckLabel>Yes</label>
            </div>
          </div>
          <div class="g-3 mb-3" *ngIf="hasVaccinations">
            <div>
              <h4 class="mb-3">Vaccinations</h4>
              <div *ngIf="formData.vaccinations?.length" class="mb-3">
                <div>
                  <table class="table table-hover table-striped">
                    <thead>
                      <tr>
                        <th>Name</th>
                        <th>Number Vaccinated</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let vac of formData.vaccinations; index as i">
                        <td>{{ vac.name }}</td>
                        <td>{{ vac.numberVaccinated }}</td>
                        <td></td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>

              <div>
                <div>
                  <app-vaccinations (submit)="onVaccinationSubmitted($event)" class="mb-4"></app-vaccinations>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="row g-3 mb-3">
          <label>Diagnostic Tests</label>
          <div>
            <div>
              <input cFormCheckInput formControlName="tested" type="radio" [value]="false" />
              <label cFormCheckLabel>No</label>
            </div>
            <div>
              <input cFormCheckInput formControlName="tested" type="radio" [value]="true" />
              <label cFormCheckLabel>Yes</label>
            </div>
          </div>
          <div class="g-3 mb-3" *ngIf="hasTests">
            <div>
              <h4 class="mb-3">Diagnostic Tests</h4>
              <div *ngIf="formData.diagnosticTests?.length" class="mb-3">
                <div>
                  <table class="table table-hover table-striped">
                    <thead>
                      <tr>
                        <th>Name</th>
                        <th>Number Tested</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let test of formData.diagnosticTests; index as i">
                        <td>{{ test.name }}</td>
                        <td>{{ test.numberTested }}</td>
                        <td></td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>

              <div>
                <div>
                  <app-diagnostic-tests (submit)="onTestSubmitted($event)" class="mb-4"></app-diagnostic-tests>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="g-3 mb-3">
          <div xs>
            <label>Comments/Remarks</label>
            <textarea aria-label="Comments" cFormControl formControlName="treatmentDetails"
              placeholder="Comments"></textarea>
          </div>
        </div>

        <div>
          <div>
            <input (click)="onPrevious()" type="button" name="previous" class="previous btn btn-light mx-1"
              value="Previous" />
            <input (click)="onSubmit()" type="submit" name="submit" class="submit btn btn-primary mx-1" value="Submit"
              [disabled]="treatmentSourceInfo.invalid" />
          </div>
        </div>

      </div>
    </div>
  </fieldset>
</form>