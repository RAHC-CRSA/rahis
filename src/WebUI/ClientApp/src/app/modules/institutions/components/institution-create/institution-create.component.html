<c-row ngPreserveWhitespaces>
  <c-col xs="12">
    <c-card class="mb-4">
      <c-card-header>
        <strong>Create Institution</strong>
      </c-card-header>
      <c-card-body>
        <form cForm [formGroup]="institutionForm" novalidate="novalidate" (ngSubmit)="submit()"
          class="needs-validation">
          <ng-container *ngIf="hasError" class="alert alert-danger">
            <p class="text-red">The form is invalid</p>
          </ng-container>
          <c-row class="g-3 mb-3">
            <c-col>
              <label>Name</label>
              <input aria-label="Institution name" cFormControl formControlName="name" placeholder="Institution name"
                [ngClass]="{
                'border border-danger':
                  institutionForm.controls['name'].touched &&
                  institutionForm.controls['name'].invalid
              }" />
              <ng-container [ngTemplateOutlet]="formError"
                [ngTemplateOutletContext]="{validation: 'required', message: 'Institution name is required', control: institutionForm.controls['name']}"></ng-container>
              <ng-container [ngTemplateOutlet]="formError"
                [ngTemplateOutletContext]="{validation: 'minlength', message: 'Institution name should have at least 3 characters', control: institutionForm.controls['name']}"></ng-container>
            </c-col>
          </c-row>

          <c-row class="g-3 mb-3">
            <c-col>
              <label>Type</label>
              <input aria-label="Institution type" cFormControl formControlName="type" placeholder="Institution type"
                [ngClass]="{
                'border border-danger':
                  institutionForm.controls['type'].touched &&
                  institutionForm.controls['type'].invalid
              }" />
              <ng-container [ngTemplateOutlet]="formError"
                [ngTemplateOutletContext]="{validation: 'required', message: 'Institution type is required', control: institutionForm.controls['type']}"></ng-container>
              <ng-container [ngTemplateOutlet]="formError"
                [ngTemplateOutletContext]="{validation: 'minlength', message: 'Institution type should have at least 3 characters', control: institutionForm.controls['type']}"></ng-container>
            </c-col>
          </c-row>

          <c-row class="mb-3">
            <c-col>
              <label>Is this a public sector institution?</label>
              <div>
                <c-form-check>
                  <input cFormCheckInput formControlName="publicSector" type="radio" [value]="false" />
                  <label cFormCheckLabel>No</label>
                </c-form-check>
                <c-form-check>
                  <input cFormCheckInput formControlName="publicSector" type="radio" [value]="true" />
                  <label cFormCheckLabel>Yes</label>
                </c-form-check>
              </div>
            </c-col>
          </c-row>

          <c-row>
            <c-col>
              <button cButton type="submit" class="px-4" color="primary" [disabled]="institutionForm.invalid">
                Submit
              </button>
            </c-col>
          </c-row>
        </form>
      </c-card-body>
    </c-card>
  </c-col>
</c-row>

<ng-template #formError let-control="control" let-message="message" let-validation="validation">
  <ng-container *ngIf="control.hasError(validation) && (control.dirty || control.touched)">
    <div class="text-danger p-2"><small>{{ message }}</small></div>
  </ng-container>
</ng-template>